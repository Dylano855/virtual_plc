@startuml Tasks_Communication_Sequence
!theme plain
title Task Communication Sequence Diagram

skinparam sequenceArrowFontColor black
skinparam sequenceArrowFontSize 13
skinparam noteFontColor black
skinparam noteFontSize 12
skinparam participantFontColor black
skinparam participantFontSize 13
skinparam boxBkgColor white

participant "WakeUp Task" as WakeUp
participant "GVL" as GVL
participant "Breakfast Task" as Breakfast

autonumber

== WakeUp Task - Write Signals ==

WakeUp -> GVL : Write: AlarmOn = TRUE
WakeUp -> GVL : Write: GotOutOfBed = TRUE
WakeUp -> GVL : Write: BrushedTeeth = TRUE

note right of GVL
  Variables stored
  in shared memory
end note

== WakeUp Task - Ready Signal ==

WakeUp -> GVL : Write: ReadyForBreakfast = TRUE

note right of WakeUp
  WakeUp Task Complete
  Signals written to GVL
end note

== Breakfast Task - Check Signal ==

Breakfast -> GVL : Read: ReadyForBreakfast

note right of Breakfast
  Check condition
  ReadyForBreakfast == TRUE?
end note

== Breakfast Task - Write Signals ==

Breakfast -> GVL : Write: MakingBreakfast = TRUE
Breakfast -> GVL : Write: EatingBreakfast = TRUE
Breakfast -> GVL : Write: ReadyToLeave = TRUE

note right of GVL
  All variables
  stored in shared memory
end note

note right of Breakfast
  Breakfast Task Complete
  Signals written to GVL
end note

== Final GVL State ==

note over GVL
  GVL Contents:
  
  From WakeUp Task:
  • AlarmOn = TRUE
  • GotOutOfBed = TRUE
  • BrushedTeeth = TRUE
  • ReadyForBreakfast = TRUE
  
  From Breakfast Task:
  • MakingBreakfast = TRUE
  • EatingBreakfast = TRUE
  • ReadyToLeave = TRUE
  
end note

@enduml